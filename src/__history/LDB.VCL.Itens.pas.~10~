unit LDB.VCL.Itens;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls, Vcl.Imaging.pngimage,
  Vcl.ComCtrls, Vcl.StdCtrls, Vcl.Buttons;

type
  TfrmItens = class(TForm)
    Image1: TImage;
    pgcItens: TPageControl;
    TabSheet1: TTabSheet;
    Movimentação: TTabSheet;
    lblID: TLabel;
    txtID: TEdit;
    txtDescricao: TEdit;
    lblDescricao: TLabel;
    txtPrecoCusto: TEdit;
    lblCusto: TLabel;
    txtPrecoVenda: TEdit;
    lblCenda: TLabel;
    lblMargem: TLabel;
    SpeedButton1: TSpeedButton;
    SpeedButton2: TSpeedButton;
    SpeedButton3: TSpeedButton;
    SpeedButton4: TSpeedButton;
    SpeedButton5: TSpeedButton;
    procedure txtPrecoVendaExit(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmItens: TfrmItens;

implementation

{$R *.dfm}

procedure TfrmItens.txtPrecoVendaExit(Sender: TObject);
var
  res : double;
begin
  if txtPrecoCusto.Text <> '' then
  begin
    res := ((strToFloat(txtPrecoVenda.Text)*100)/strToFloat(txtPrecoCusto.Text))-100;
    if res < 0 then
    begin
      lblMargem.Caption := formatfloat('##,.##'   , res) + '%';
      lblMargem.Font.Color := clRED;
    end
    else
    begin

      lblMargem.Caption := '+'+formatfloat('##,.##'   , res) + '%';
      lblMargem.Font.Color := clGREEN;
    end;
  end;




end;

end.
